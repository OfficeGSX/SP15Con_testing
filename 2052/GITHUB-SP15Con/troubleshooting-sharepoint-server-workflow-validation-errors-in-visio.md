---
title: 对 Visio 中的 SharePoint Server 工作流验证进行故障排除
ms.prod: SHAREPOINT
ms.assetid: c21cc3e2-45bd-4d34-a57d-dd0954436bd8
---


# 对 Visio 中的 SharePoint Server 工作流验证进行故障排除
使用此参考解决 Microsoft Visio 2013 和 Microsoft SharePoint Designer 2013 中的 Microsoft SharePoint 2013 工作流模板的验证和错误检查问题。
## SharePoint 工作流验证问题
<a name="VSSPD_Trouble_Issues"> </a>

下表列出了 Microsoft Visio 2013 中的"问题"窗格或 Microsoft SharePoint Designer 2013 中的可视化设计器可能出现的所有验证问题。每个错误都有一个用于解决此问题的建议操作。
  
    
    


|**错误文本**|**建议操作**|
|:-----|:-----|
|工作流形状之间存在重复连接。  <br/> |通过选择并删除来删除多余的连接器。  <br/> |
|不允许在阶段或步骤中循环回父形状。  <br/> |Visio Professional 2013 和 SharePoint Designer 2013 都不支持阶段内具有隐式循环的工作流。请检查您的工作流循环并删除循环连接。若要创建阶段内包含循环步骤的 SharePoint 工作流，则必须使用循环容器。这些容器中的任何操作将循环进行。您也可以选择使用转到前一阶段的阶段。  <br/> |
|不允许连续的并行活动。  <br/> |活动可以并行或连续进行，但不能并行且连续。对于并行活动，删除连续连接器。对于连续的活动，删除并行连接器。有时，很难识别并行且连续的活动。以下验证错误显示的是并行和连续排列的其他常见实例，并且提供可选排列。  <br/> 若要避免连接器从多个路径指向同一个活动，请尝试重复该活动。  <br/> |
|条件形状没有标明"是"或"否"的连接。  <br/> |右键单击连接器，分配标签"是"或"否"。  <br/> |
|条件形状必须有标明"是"或"否"标签的传出连接。  <br/> |确保条件形状具有附加到其他工作流形状的传出连接器。每个条件形状必须有"是"或"否"传出连接。  <br/> |
|此连接器不是 SharePoint 工作流连接器。使用自动连接或连接器工具连接您的形状。  <br/> |由于其他图的连接器不一定设计为与 SharePoint 工作流一起使用，所以避免对其进行重用。删除所选的连接器，并使用连接器工具或自动连接来更换新的连接器。  <br/> |
|必须将接器连接到两个工作流形状。  <br/> |删除闭端连接器，或将它们连接至第二个形状。  <br/> |
|图必须只有一个工作流和一个开始形状。  <br/> |所有的路径必须来自同一开始形状。删除额外的开始形状排列连接器，以便路径从同一个地方开始。  <br/> |
|该形状不是 SharePoint 工作流形状。工作流中只能连接 SharePoint 工作流形状。  <br/> |只有来自 SharePoint 工作流模具的工作流形状可以在 Microsoft SharePoint 工作流模板中使用。无法识别其他流程图形状，还会妨碍将工作流导入 SharePoint Designer。  <br/> |
|开始形状不得具备传入连接。  <br/> |删除开始形状的传入连接器。  <br/> |
|工作流必须有一个开始形状。  <br/> |在工作流的开头添加一个开始形状并将其连接到第一个活动。  <br/> |
|工作流形状未连接到工作流。  <br/> |如果工作流形状是必要的，添加连接器以便将工作流形状连接到工作流路径。否则请删除该形状。  <br/> |
|工作流嵌套级别不可超过最大值 10。  <br/> |Visio 2013 最多可以识别 10 级的嵌套工作流活动。重新排列工作流，通过删除活动或将工作流路径分成多个分支来降低复杂性。  <br/> |
|开始形状只能连接到工作流阶段形状。  <br/> |所有工作流程图必须只以一个开始形状开始。必须将开始形状连接到阶段形状。如有必要，在工作流的开头添加一个开始形状。您还可以在 Visio 2013 阶段视图的工作流开头添加一个开始形状。  <br/> |
|一个阶段不能嵌套在其他任何形状中。  <br/> |阶段是 SharePoint 2013 工作流程图中的顶级形状。您不能将一个形状放入步骤、循环或其他阶段等任何其他容器形状中。  <br/> 如果可能，请移动阶段，使其处于所有其他容器形状外部，并重新连接阶段。如果要在阶段或循环内创建操作和条件逻辑分组，请改用步骤形状。  <br/> |
|一个阶段只能连接到另一个阶段、条件形状或终止符。  <br/> |只能将阶段连接到其他顶级形状（包括条件、终止符或其他阶段）。不能将阶段连接到顶级的操作、步骤或循环。重新排列工作流程图，将阶段仅连接到其他顶级形状。  <br/> |
|不能重叠阶段、步骤和循环容器。  <br/> |容器形状（如阶段、步骤和循环等）的边界不得相互接触或重叠。如果您希望将一个容器形状包含另一个容器形状中（例如将一个循环包含在一个阶段内），请确保包含的形状完全位于容器的边界以内。如果您不希望容器形状包含在其他容器形状内，请将形状在图中拉开距离，以使容器形状的边界不会交叉或相互接触。  <br/> |
|来自其他模板/版本的工作流形状不是有效的工作流形状。  <br/> |您只能使用来自形状 SharePoint 2013 工作流操作、SharePoint 2013 工作流条件及 SharePoint 2013 工作流终止符模具的形状，以及使用自动连接和与 Microsoft SharePoint 2013 工作流程图中的模板相关联的连接器工具创建的连接器。所有其他形状不是符合工作流有效性规则的有效连接。只要它们没有连接到该工作流，您就可以在设计画布上放置其他形状。  <br/> 如果您需要包括某一操作或条件，而该操作或条件具备的形状不在 Microsoft SharePoint 2013 工作流模板关联的模具中，请考虑创建一个自定义工作流操作。可以在 Microsoft Visual Studio 2012 中创建自定义工作流操作，然后将其合并到 SharePoint 2013 的 SharePoint Designer 2013 工作流中。有关如何在 Visual Studio 2008 中创建自定义操作的详细信息，请参阅文章 [使用 Visual Studio 开发 SharePoint 2013 工作流](develop-sharepoint-2013-workflows-using-visual-studio.md)。  <br/> |
|不得将形状与当前形状连接到容器的开始/结束路径外部。  <br/> |包含在阶段、循环或步骤中的所有形状都必须完全包含在该容器形状内。不能将形状连接到不包含在同一个容器中的任何形状。重新排列该工作流程图，以将容器形状中的所有操作、条件、循环和步骤连接到容器中的其他形状。  <br/> 如果必须将该形状连接到容器外部的活动，将形状连接到与此容器关联的退出形状。  <br/> |
|无效的切换形状。  <br/> |当您将非条件或非阶段的形状添加到工作流的基础级别时，工作流的基础级别中只可能存在阶段和条件。其他任何添加到此级别的形状都会导致此错误。您应将非条件和非阶段形状封装在某个条件或阶段形状中。  <br/> |
|阶段、步骤和循环可能只有一个传入连接和一个传出连接。  <br/> |所有容器形状只能有一个传入连接器连接到与它们关联的输入形状。同样地，容器形状只能有一个来自其退出形状的传出连接器。重新排列图使每个容器都有单一的传入和传出路径。您可能需要将其他的阶段或接合形状添加到该工作流以便修复此错误。  <br/> |
|阶段名称必须是唯一的并且不能为空。  <br/> |工作流中的每个阶段必须有唯一的名称。切换到阶段视图，并确保每个阶段都有其自己的名称。  <br/> |
|尚未配置项目阶段。  <br/> |对于基于项目的工作流，必须将每个阶段链接到项目服务器上的一个阶段。如果未将某个阶段连接到服务器上的一个阶段，您将看到此错误。若要更正此问题，请打开阶段属性网格，并从阶段下拉菜单设置一个阶段。  <br/> |
|并行活动必须以开始并行分支形状开始。  <br/> |检查工作流中的每个并行活动，以确保它在并行活动开始前已具备开始并行分支形状。  <br/> |
   

## 其他资源
<a name="VSSPD_Trouble_Additional"> </a>


-  [SharePoint Designer 和 Visio 中的工作流开发](workflow-development-in-sharepoint-designer-and-visio.md)
    
  
-  [Visio 中的 SharePoint Server 工作流模板中的形状](shapes-in-the-sharepoint-server-workflow-template-in-visio.md)
    
  
-  [工作流操作快速参考（SharePoint 2013 工作流平台）](workflow-actions-quick-reference-sharepoint-2013-workflow-platform.md)
    
  
-  [在 Visio 2010 中创建、导入和导出 SharePoint 工作流](http://office.microsoft.com/zh-cn/HA101888007.aspx)
    
  
-  [SharePoint 开发中心](http://msdn.microsoft.com/zh-cn/sharepoint/default.aspx)
    
  
-  [Visio 开发中心](http://msdn.microsoft.com/zh-cn/office/aa905478)
    
  

